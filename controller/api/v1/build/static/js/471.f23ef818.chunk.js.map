{"version":3,"file":"static/js/471.f23ef818.chunk.js","mappings":"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","sources":["components/Box.jsx","components/Button.jsx","components/Form.jsx","components/Formik.jsx","components/TextField.jsx","components/Typography.jsx","pages/Holder/index.jsx","../node_modules/za-id-validator/source/index.js"],"sourcesContent":["import { Box } from '@mui/material'\n\nconst BoxComponent = ({ alt, children, component, src, sx }) => {\n  return (\n    <Box alt={alt} component={component} src={src} sx={sx}>\n      {children}\n    </Box>\n  )\n}\n\nexport default BoxComponent\n","// mui5\nimport { Button } from '@mui/material'\n\nconst ButtonComponent = ({\n  children,\n  color,\n  disabled,\n  endIcon,\n  onClick,\n  size,\n  startIcon,\n  sx,\n  type,\n  variant,\n}) => {\n  return (\n    <Button\n      color={color}\n      disabled={disabled}\n      endIcon={endIcon}\n      onClick={onClick}\n      size={size}\n      sx={sx}\n      startIcon={startIcon}\n      type={type}\n      variant={variant}\n    >\n      {children}\n    </Button>\n  )\n}\n\nexport default ButtonComponent\n","import { Form } from 'formik'\n\nconst FormComponent = ({ children }) => {\n  return <Form>{children}</Form>\n}\n\nexport default FormComponent\n","import { Formik } from 'formik'\n\nconst FormikComponent = ({ children, initialValues, onSubmit, validate }) => {\n  return (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={onSubmit}\n      validate={validate}\n    >\n      {children}\n    </Formik>\n  )\n}\n\nexport default FormikComponent\n","import { TextField } from '@mui/material'\n\nconst FieldComponent = ({\n  defaultValue,\n  disabled,\n  error,\n  focused,\n  fullWidth,\n  helperText,\n  id,\n  InputLabelProps,\n  label,\n  name,\n  onChange,\n  props,\n  required,\n  sx,\n  type,\n  value,\n}) => {\n  return (\n    <TextField\n      defaultValue={defaultValue}\n      disabled={disabled}\n      error={error}\n      focused={focused}\n      fullWidth={fullWidth}\n      helperText={helperText}\n      id={id}\n      InputLabelProps={InputLabelProps}\n      label={label}\n      name={name}\n      onChange={onChange}\n      required={required}\n      sx={sx}\n      type={type}\n      value={value}\n      {...props}\n    />\n  )\n}\n\nexport default FieldComponent\n","import { Typography } from '@mui/material'\n\nconst TypographyComponent = ({ align, children, color, sx, variant }) => {\n  return (\n    <Typography\n      align={align}\n      color={color ? color : '#777'}\n      sx={sx}\n      variant={variant}\n    >\n      {children}\n    </Typography>\n  )\n}\n\nexport default TypographyComponent\n","import { useState } from 'react'\nimport { Divider } from '@mui/material'\nimport { toast } from 'react-toastify'\nimport axios from 'axios'\nimport QRCode from 'react-qr-code'\nimport validate from 'za-id-validator'\n// components\nimport BoxComponent from '../../components/Box'\nimport ButtonComponent from '../../components/Button'\nimport FormikComponent from '../../components/Formik'\nimport FormComponent from '../../components/Form'\nimport TextFieldComponent from '../../components/TextField'\nimport TypographyComponent from '../../components/Typography'\n\nconst idValidation = data => {\n  const errors = {}\n\n  if (validate(data.id_number)) {\n  } else {\n    errors.id_number = 'Invalid ZA ID number!'\n  }\n\n  return errors\n}\n\nconst HolderPage = () => {\n  const [submitting, setSubmitting] = useState(false)\n  const [success, setSuccess] = useState(false)\n  const [data, setData] = useState([])\n\n  const sendOffer = async data => {\n    setSubmitting(true)\n    let apiURL = '/api/v1/cornerstone/issuer/credential'\n\n    if (process.env.API_BASE_URL) {\n      apiURL = process.env.API_BASE_URL + '/cornerstone/issuer/credential'\n    }\n\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n      await toast.promise(\n        axios\n          .post(process.env.REACT_APP_API_URL + 'credential', data)\n          .then(response => {\n            setData(response.data)\n            setSuccess(true)\n            toast.success('Credential qr code generated!')\n          })\n          .catch(error => {\n            toast.error(error.response.data.msg)\n          }),\n        {\n          pending: 'Generating credential qr code...',\n        }\n      )\n    } else {\n      await toast.promise(\n        axios\n          .post(apiURL, data)\n          .then(response => {\n            setData(response.data)\n            setSuccess(true)\n            toast.success('Credential qr code generated!')\n          })\n          .catch(error => {\n            toast.error(error.response.data.msg)\n          }),\n        {\n          pending: 'Generating credential qr code...',\n        }\n      )\n    }\n    setSubmitting(false)\n  }\n\n  return (\n    <BoxComponent\n      sx={{\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        boxShadow: 24,\n        backgroundColor: 'background.paper',\n        borderRadius: '1rem',\n        p: '3rem 4rem 3rem 3rem',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        textAlign: 'center',\n      }}\n    >\n      <TypographyComponent variant=\"h5\">\n        Get my Cornerstone Credential\n      </TypographyComponent>\n      <Divider />\n      <FormikComponent\n        initialValues={{\n          email: '',\n          id_number: '',\n          surname: '',\n          forenames: '',\n          gender: '',\n          date_of_birth: '',\n          country_of_birth: '',\n        }}\n        validate={idValidation}\n        onSubmit={(values, { resetForm }) => {\n          sendOffer(values)\n          // resetForm()\n        }}\n      >\n        {({ values, handleChange, touched, errors }) => (\n          <FormComponent>\n            <div>\n              <TextFieldComponent\n                error={touched.id_number && Boolean(errors.id_number)}\n                helperText={touched.id_number && errors.id_number}\n                id=\"id_number\"\n                name=\"id_number\"\n                value={values.id_number}\n                onChange={handleChange}\n                label=\"ID Number\"\n                sx={{ m: '1rem' }}\n                required\n              />\n\n              <TextFieldComponent\n                id=\"forenames\"\n                name=\"forenames\"\n                value={values.forenames}\n                onChange={handleChange}\n                label=\"Forenames\"\n                sx={{ m: '1rem' }}\n                required\n              />\n            </div>\n\n            <div>\n              <TextFieldComponent\n                id=\"surname\"\n                name=\"surname\"\n                value={values.surname}\n                onChange={handleChange}\n                label=\"Surname\"\n                sx={{ m: '1rem' }}\n                required\n              />\n              <TextFieldComponent\n                id=\"gender\"\n                name=\"gender\"\n                // value={values.gender}\n                value={\n                  (values.gender =\n                    values.id_number.substring(6, 7) > 4 ? 'Male' : 'Female')\n                }\n                onChange={handleChange}\n                label=\"Gender\"\n                sx={{ m: '1rem' }}\n                required\n                disabled\n              />\n            </div>\n\n            <div>\n              <TextFieldComponent\n                id=\"date_of_birth\"\n                name=\"date_of_birth\"\n                // type=\"date\"\n                // value={values.date_of_birth}\n                value={\n                  (values.date_of_birth =\n                    values.id_number.substring(0, 1) > 2\n                      ? '19' +\n                        values.id_number.substring(0, 2) +\n                        '-' +\n                        values.id_number.substring(2, 4) +\n                        '-' +\n                        values.id_number.substring(4, 6)\n                      : '20' +\n                        values.id_number.substring(0, 2) +\n                        '-' +\n                        values.id_number.substring(2, 4) +\n                        '-' +\n                        values.id_number.substring(4, 6))\n                }\n                onChange={handleChange}\n                label=\"D.O.B\"\n                // sx={{ m: '1rem', width: '15rem' }}\n                sx={{ m: '1rem' }}\n                required\n                // InputLabelProps={{\n                //   shrink: true,\n                // }}\n                disabled\n              />\n\n              <TextFieldComponent\n                id=\"country_of_birth\"\n                name=\"country_of_birth\"\n                value={\n                  (values.country_of_birth =\n                    values.id_number.substring(10, 11) === '0'\n                      ? 'South Africa'\n                      : '')\n                }\n                onChange={handleChange}\n                label=\"Country of Birth\"\n                sx={{ m: '1rem' }}\n                required\n                disabled={values.id_number.substring(10, 11) === '0'}\n              />\n            </div>\n\n            <div>\n              <TextFieldComponent\n                id=\"email\"\n                name=\"email\"\n                value={values.email}\n                onChange={handleChange}\n                label=\"Email\"\n                sx={{ m: '1rem' }}\n                required\n              />\n            </div>\n\n            <div>\n              <ButtonComponent\n                variant=\"contained\"\n                type=\"submit\"\n                sx={{ color: '#fff', m: '1rem' }}\n                disabled={submitting}\n              >\n                Send\n              </ButtonComponent>\n            </div>\n          </FormComponent>\n        )}\n      </FormikComponent>\n\n      {success ? <QRCode value={data.credential} /> : ''}\n    </BoxComponent>\n  )\n}\n\nexport default HolderPage\n","// Converts an integer into an array of digits\nfunction digits (n) {\n  return Array.from(n.toString && n.toString());\n}\n\n/* Validates a South African ID number based on the formula from\n * http://geekswithblogs.net/willemf/archive/2005/10/30/58561.aspx\n */\nfunction validate (idInput) {\n  if (idInput === null || typeof idInput === 'undefined') {\n    return false;\n  }\n\n  const id = digits(idInput);\n\n  if (id.length !== 13) return false;\n\n  // Add up all the even digits (excluding the last)\n  const a = id.slice(0, 12).reduce((sum, d, i) => {\n    return i % 2 ? sum : sum + Number(d);\n  }, 0);\n\n  // Concatenate all the odd digits and multiply by two\n  const b = Number(\n    id.reduce((s, d, i) => i % 2 ? s + d.toString() : s, '')\n  ) * 2;\n\n  // Add `a` to the sum of all the digits in `b`\n  const c = a + digits(b).reduce((sum, d) => sum + Number(d), 0);\n\n  // Subtract the last digit of `c` from 10\n  const d = 10 - digits(c).pop();\n\n  // Validate by comparing the last digit of `d` to the last digit of the id number\n  return digits(d).pop() === id[12];\n}\n\nexport default validate;\n"],"names":["alt","children","component","src","sx","color","disabled","endIcon","onClick","size","startIcon","type","variant","initialValues","onSubmit","validate","defaultValue","error","focused","fullWidth","helperText","id","InputLabelProps","label","name","onChange","props","required","value","align","idValidation","data","errors","id_number","useState","submitting","setSubmitting","success","setSuccess","setData","sendOffer","apiURL","process","API_BASE_URL","toast","axios","then","response","catch","msg","pending","position","top","left","transform","boxShadow","backgroundColor","borderRadius","p","display","flexDirection","alignItems","justifyContent","textAlign","email","surname","forenames","gender","date_of_birth","country_of_birth","values","resetForm","handleChange","touched","Boolean","m","substring","credential","digits","n","Array","from","toString","idInput","length","a","slice","reduce","sum","d","i","Number","b","s","c","pop"],"sourceRoot":""}