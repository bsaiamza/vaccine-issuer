"use strict";(self.webpackChunkcornerstone_issuer=self.webpackChunkcornerstone_issuer||[]).push([[471],{9055:function(e,r,n){var i=n(4554),t=n(184);r.Z=function(e){var r=e.alt,n=e.children,a=e.component,u=e.src,s=e.sx;return(0,t.jsx)(i.Z,{alt:r,component:a,src:u,sx:s,children:n})}},816:function(e,r,n){var i=n(439),t=n(184);r.Z=function(e){var r=e.children,n=e.color,a=e.disabled,u=e.endIcon,s=e.onClick,o=e.size,d=e.startIcon,l=e.sx,c=e.type,m=e.variant;return(0,t.jsx)(i.Z,{color:n,disabled:a,endIcon:u,onClick:s,size:o,sx:l,startIcon:d,type:c,variant:m,children:r})}},5589:function(e,r,n){var i=n(2506),t=n(184);r.Z=function(e){var r=e.children;return(0,t.jsx)(i.l0,{children:r})}},8425:function(e,r,n){var i=n(2506),t=n(184);r.Z=function(e){var r=e.children,n=e.initialValues,a=e.onSubmit,u=e.validate;return(0,t.jsx)(i.J9,{initialValues:n,onSubmit:a,validate:u,children:r})}},4695:function(e,r,n){var i=n(1413),t=n(3006),a=n(184);r.Z=function(e){var r=e.defaultValue,n=e.disabled,u=e.error,s=e.focused,o=e.fullWidth,d=e.helperText,l=e.id,c=e.InputLabelProps,m=e.label,b=e.name,f=e.onChange,_=e.props,h=e.required,v=e.sx,x=e.type,p=e.value;return(0,a.jsx)(t.Z,(0,i.Z)({defaultValue:r,disabled:n,error:u,focused:s,fullWidth:o,helperText:d,id:l,InputLabelProps:c,label:m,name:b,onChange:f,required:h,sx:v,type:x,value:p},_))}},9624:function(e,r,n){var i=n(4567),t=n(184);r.Z=function(e){var r=e.align,n=e.children,a=e.color,u=e.sx,s=e.variant;return(0,t.jsx)(i.Z,{align:r,color:a||"#777",sx:u,variant:s,children:n})}},471:function(e,r,n){n.r(r);var i=n(4165),t=n(5861),a=n(885),u=n(2791),s=n(4721),o=n(6960),d=n(4569),l=n.n(d),c=n(925),m=n(9281),b=n(9055),f=n(816),_=n(8425),h=n(5589),v=n(4695),x=n(9624),p=n(184),g=function(e){var r={};return(0,m.Z)(e.id_number)||(r.id_number="Invalid ZA ID number!"),r};r.default=function(){var e=(0,u.useState)(!1),r=(0,a.Z)(e,2),n=r[0],d=r[1],m=(0,u.useState)(!1),Z=(0,a.Z)(m,2),S=Z[0],C=Z[1],j=(0,u.useState)([]),E=(0,a.Z)(j,2),T=E[0],y=E[1],A=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0),n="/api/v1/cornerstone/issuer/credential",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_BASE_URL&&(n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_BASE_URL+"/cornerstone/issuer/credential"),e.next=8;break;case 6:e.next=10;break;case 8:return e.next=10,o.Am.promise(l().post(n,r).then((function(e){y(e.data),C(!0),o.Am.success("Credential qr code generated!")})).catch((function(e){o.Am.error(e.response.data.msg)})),{pending:"Generating credential qr code..."});case 10:d(!1);case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,p.jsxs)(b.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",boxShadow:24,backgroundColor:"background.paper",borderRadius:"1rem",p:"3rem 4rem 3rem 3rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[(0,p.jsx)(x.Z,{variant:"h5",children:"Get my Cornerstone Credential"}),(0,p.jsx)(s.Z,{}),(0,p.jsx)(_.Z,{initialValues:{email:"",id_number:"",surname:"",forenames:"",gender:"",date_of_birth:"",country_of_birth:""},validate:g,onSubmit:function(e,r){r.resetForm;A(e)},children:function(e){var r=e.values,i=e.handleChange,t=e.touched,a=e.errors;return(0,p.jsxs)(h.Z,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(v.Z,{error:t.id_number&&Boolean(a.id_number),helperText:t.id_number&&a.id_number,id:"id_number",name:"id_number",value:r.id_number,onChange:i,label:"ID Number",sx:{m:"1rem"},required:!0}),(0,p.jsx)(v.Z,{id:"forenames",name:"forenames",value:r.forenames,onChange:i,label:"Forenames",sx:{m:"1rem"},required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(v.Z,{id:"surname",name:"surname",value:r.surname,onChange:i,label:"Surname",sx:{m:"1rem"},required:!0}),(0,p.jsx)(v.Z,{id:"gender",name:"gender",value:r.gender=r.id_number.substring(6,7)>4?"Male":"Female",onChange:i,label:"Gender",sx:{m:"1rem"},required:!0,disabled:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(v.Z,{id:"date_of_birth",name:"date_of_birth",value:r.date_of_birth=r.id_number.substring(0,1)>2?"19"+r.id_number.substring(0,2)+"-"+r.id_number.substring(2,4)+"-"+r.id_number.substring(4,6):"20"+r.id_number.substring(0,2)+"-"+r.id_number.substring(2,4)+"-"+r.id_number.substring(4,6),onChange:i,label:"D.O.B",sx:{m:"1rem"},required:!0,disabled:!0}),(0,p.jsx)(v.Z,{id:"country_of_birth",name:"country_of_birth",value:r.country_of_birth="0"===r.id_number.substring(10,11)?"South Africa":"",onChange:i,label:"Country of Birth",sx:{m:"1rem"},required:!0,disabled:"0"===r.id_number.substring(10,11)})]}),(0,p.jsx)("div",{children:(0,p.jsx)(v.Z,{id:"email",name:"email",value:r.email,onChange:i,label:"Email",sx:{m:"1rem"},required:!0})}),(0,p.jsx)("div",{children:(0,p.jsx)(f.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:n,children:"Send"})})]})}}),S?(0,p.jsx)(c.Z,{value:T.credential}):""]})}},9281:function(e,r){function n(e){return Array.from(e.toString&&e.toString())}r.Z=function(e){if(null===e||"undefined"===typeof e)return!1;var r=n(e);if(13!==r.length)return!1;var i=r.slice(0,12).reduce((function(e,r,n){return n%2?e:e+Number(r)}),0),t=2*Number(r.reduce((function(e,r,n){return n%2?e+r.toString():e}),"")),a=i+n(t).reduce((function(e,r){return e+Number(r)}),0),u=10-n(a).pop();return n(u).pop()===r[12]}}}]);
//# sourceMappingURL=471.f23ef818.chunk.js.map